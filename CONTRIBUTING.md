# Contributing

## In general

_is much appreciated_

You may help via

- Commenting on the existing issues in the [DryIoc GitHub repository](https://github.com/dadhi/DryIoc).
- Opening new issues for bugs, enhancements, and feature proposals.
- Creating Pull Requests with the improvements, failed tests for the found bugs, and the bug fixes.
- Correcting the documentation errors and submitting the new documentation topics.
- Asking and answering questions on [StackOverflow](http://stackoverflow.com/questions/tagged/dryioc), tagging your questions with `dryioc` tag for easy finding.
- Discussing the problems and ideas in the [Gitter](https://gitter.im/dadhi/DryIoc) or [Slack](https://dryioc.slack.com) rooms.
- Poking me on [Twitter](http://twitter.com/intent/user?screen_name=DryIoc).


## How to report an issue step-by-step

If you found the problem with DryIoc:

 - Please check that you are using the [latest DryIoc version](https://bitbucket.org/dadhi/dryioc/wiki/Home#markdown-header-latest-version).
 - [Create new issue](https://github.com/dadhi/DryIoc/issues/new) with problem description.
 - To get faster feedback, faster fixes, and generally to make me happy :-) 
     - [Fork DryIoc](https://github.com/dadhi/DryIoc/fork)
     - Add failing tests reproducing your case to `test\DryIoc.IssuesTests` project. Check other files in the project for general guideline, but nothing is strict here.
     - **Ignore** the failing tests with `[Ignore("fixme")]` attribute, so that CI build pass.
     - Commit your tests and create a Pull Request for me to review.
    
Thank you.


## How to build and develop the DryIoc

### Build from the command line 

Before sending a Pull Request, please build solution with `build.bat` located in the root folder.

It will build all projects for __all platforms__ in Release configuration, run unit tests, and create NuGet packages.
Make sure that there are no project build errors or failing tests.

### Develop in Visual Studio 2017+

Open `DryIoc.sln` solution and re-build it. If something is failing, you may try to close VS, open command line and run `dotnet clean`, then `build.bat` in solution folder, open VS and try to build again.

__Note:__ Projects in the solution multi-target multiple platforms, e.g. `DryIoc` targets 6+ platforms which makes it slower to build. To speedup the development DryIoc has `<DevMode>true</DevMode>` MSBuild property set to `true` in `Directory.Build.props` file in the solution root folder. This setting minimizes the number of platforms to target. That's why you need to run `build.bat` to test your work on all platforms.

__Productivity hint:__ I am using [NCrunch](http://www.ncrunch.net/) to build and run tests continuously, to get an immediate feedback, quickly find regressions, and generally experiment with the code.

### Develop in Visual Studio Code

It is possible to develop and run tests (via extensions) in VS Code. 


## Contributing to the documentation

### Documentation in DryIoc explained

DryIoc uses **compilable runnable documentation** written in `.cs` C# files in the markdown format.
That's a lot to say :-) so let's explain it piece by piece.

Markdown text is placed inside `/*md ... md*/` block comment sections and 
the examples are just the unit test classes outside of the markdown comment blocks.

The documentation files are included into the normal NUnit test project `docs\DryIoc.Docs` in the DryIoc solution. That way docs are compiled and __examples (tests) are always up-to-date__ and can be run locally and on CI side.

The doc `.cs` file can be converted to the markdown `.md` file just by removing the `/*md` and `md*/` strings. That's exactly what [CsToMd Visual Studio Extension](https://marketplace.visualstudio.com/items?itemName=dadhi.cstomd123) is doing.
There is a [repository](https://github.com/dadhi/CsToMd) for extension with the more information and the nice screenshots.

After installing extension and re-launching the Visual Studio, you will see that `DryIoc.Docs` project
has a corresponding `.md` file located under the `.cs` file. 

Now edit `.cs` file, save it, and the `.md` file will be automatically generated by extension.
__That also means you should not edit `.md` file directly, because the changes will be lost on the next save__.

The result markdown file may be automatically previewed inside the Visual Studio with the help of 
another extension [Markdown Editor](https://marketplace.visualstudio.com/items?itemName=MadsKristensen.MarkdownEditor).

I would also recommend installing the spell-checker: I am usually using the one available with [ReSharper](https://www.jetbrains.com/resharper/?gclid=Cj0KCQjws5HlBRDIARIsAOomqA1wr-wPRR8sQcIp3_FrcaP6_I9lceuZaUDPzjboxcU1SBHExV6tFfMaAhh5EALw_wcB&gclsrc=aw.ds) or 
you may install [Visual Studio Spell Checker extension](https://ewsoftware.github.io/VSSpellChecker/html/e339cac1-9783-4c2a-919f-88436c78fef8.htm).

### Step-by-step guide

- [Fork DryIoc](https://github.com/dadhi/DryIoc/fork) from the GitHub repository.
- Open `DryIoc.sln` in Visual Studio 2017+ with [CsToMd extension](https://marketplace.visualstudio.com/items?itemName=dadhi.cstomd123)
 installed and find `docs/DryIoc.Docs` project in the Solution Explorer.
- Make your edits into `.cs` files. If you need to create a new one I suggest to copy the existing `.cs` file for starting.
- If you changing the C# examples. Make sure to compile the project and run the tests. 
- Save edited files - the markdown file will be re-generated and saved automatically.
- Check your edits appeared in the result markdown file with the [Markdown Editor extension](https://marketplace.visualstudio.com/items?itemName=MadsKristensen.MarkdownEditor).
- Run `build.bat` file to ensure the whole solution is OK after your changes and will be successfully built on CI.
- Git Commit your changes with the descriptive message and Git Push them to your fork.
- Open the GitHub with your DryIoc fork and create a Pull Request with the just committed changes.

Thank you.

